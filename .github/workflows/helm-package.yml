name: Helm Package and S3 Bucket Upload

on:
  push:
    branches:
      - main
      - new-microservice
jobs:
  build:
    name: Helm Package
    runs-on: ubuntu-latest
    steps:
      - name: Set up Helm
        uses: azure/setup-helm@v1
        with:
          version: v3.7.0
      
      - name: Set up Helm S3 Plugin
        run: helm plugin install https://github.com/hypnoglow/helm-s3.git
      
      - name: Execute Helm Package
        run: helm package hell-chart/charts/
